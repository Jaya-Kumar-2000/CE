let data = {
	"result": "success",
	"data": {
		"2138483276469": {
			"identifier": "com.a.a",
			"urlschemes": "dd",
			"aaID": 2138483276469,
			"displayName": "a",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 1,
			"platforms": {}
		},
		"2141040209569": {
			"identifier": "com.zoho.demo1",
			"urlschemes": "",
			"aaID": 2141040209569,
			"displayName": "",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 1,
			"platforms": {}
		},
		"2140864465853": {
			"identifier": "com.vigneshwaran.WatchOSDemoApp.watchkit.extension",
			"urlschemes": "",
			"aaID": 2140864465853,
			"displayName": "",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 2,
			"platforms": {
				"2140864470858": {
					"Status": 1,
					"APID": 2140864470858,
					"OS": "watchOS",
					"Mode": 2008505175249,
					"PID": 2053954495001,
					"Tag": 4016
				}
			}
		},
		"2140878276065": {
			"identifier": "com.jambav.apptics.demo",
			"urlschemes": "",
			"aaID": 2140878276065,
			"displayName": "",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 1,
			"platforms": {}
		},
		"2141089301177": {
			"identifier": "com.zoho.notebook",
			"urlschemes": "",
			"aaID": 2141089301177,
			"displayName": "",
			"bID": 2005440938003,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Google",
			"status": 1,
			"platforms": {}
		},
		"2138168265655": {
			"identifier": "com.zoho.qa1",
			"urlschemes": "test",
			"aaID": 2138168265655,
			"displayName": "test",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 1,
			"platforms": {
				"2139017839867": {
					"Status": 1,
					"APID": 2139017839867,
					"OS": "tvOS",
					"Mode": 2008505175249,
					"PID": 2001454727251,
					"Tag": 3980
				},
				"2139017839205": {
					"Status": 1,
					"APID": 2139017839205,
					"OS": "iOS",
					"Mode": 2008505175249,
					"PID": 2000010111001,
					"Tag": 3979
				},
				"2139017847340": {
					"Status": 1,
					"APID": 2139017847340,
					"OS": "macOS",
					"Mode": 2008505175249,
					"PID": 2017297402017,
					"Tag": 3982
				},
				"2139017843842": {
					"Status": 1,
					"APID": 2139017843842,
					"OS": "watchOS",
					"Mode": 2008505175249,
					"PID": 2053954495001,
					"Tag": 3981
				}
			}
		},
		"2140949422357": {
			"identifier": "gcigc.bcocbe.biwge",
			"urlschemes": "",
			"aaID": 2140949422357,
			"displayName": "bcijgc d",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 1,
			"platforms": {}
		},
		"2141089306863": {
			"identifier": "com.jambav.dev.pudi",
			"urlschemes": "",
			"aaID": 2141089306863,
			"displayName": "",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 1,
			"platforms": {}
		},
		"2141073449058": {
			"identifier": "com.test.qa",
			"urlschemes": "",
			"aaID": 2141073449058,
			"displayName": "test",
			"bID": 2005440938001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Apple",
			"status": 1,
			"platforms": {}
		},
		"2080781067519": {
			"identifier": "com.zoho.zanalyticsapp",
			"urlschemes": "",
			"aaID": 2080781067519,
			"displayName": "",
			"bID": 2005440938003,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Google",
			"status": 2,
			"platforms": {
				"2089203275871": {
					"Status": 1,
					"APID": 2089203275871,
					"OS": "Android",
					"Mode": 2008505175249,
					"PID": 2000010111003,
					"Tag": 3232
				}
			}
		},
		"2139015463895": {
			"identifier": "com.zoho.demo",
			"urlschemes": "",
			"aaID": 2139015463895,
			"displayName": "com.zoho.demo",
			"bID": 2079903349001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Microsoft",
			"status": 1,
			"platforms": {
				"2139015463897": {
					"Status": 1,
					"APID": 2139015463897,
					"OS": "Windows",
					"Mode": 2008505175249,
					"PID": 2079903349003,
					"Tag": 3978
				}
			}
		},
		"2140939972467": {
			"identifier": "com.zoho.demo",
			"urlschemes": "",
			"aaID": 2140939972467,
			"displayName": "",
			"bID": 2005440938003,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Google",
			"status": 1,
			"platforms": {}
		},
		"2141040220147": {
			"identifier": "test.play.windows",
			"urlschemes": "",
			"aaID": 2141040220147,
			"displayName": "",
			"bID": 2079903349001,
			"type": 1,
			"projectID": 2000017429321,
			"brand": "Microsoft",
			"status": 1,
			"platforms": {}
		}
	}
}


// console.log(data.data)

const keys = Object.keys(data.data);
let apple=0;
let Google = 0;
let windowOs=0;
let searchObj= {};


keys.forEach(function(eachObj){
	if(data.data[eachObj].brand==="Apple"){
		if(Object.keys(data.data[eachObj].platforms).length === 0){
			apple+=1;
		}
		else{
			let innerPlatformObj =  Object.keys(data.data[eachObj].platforms);
			innerPlatformObj.forEach(function(){
				apple+=1;
			});	
		}
	}
	else if(data.data[eachObj].brand==="Google"){
		Google+=1;
	}
	else if(data.data[eachObj].brand==="Microsoft"){
		windowOs+=1;
	}
})


_(".appleCount").innerText = `${apple} Apps`;
_(".googleCount").innerText = `${Google} Apps`;

_(".windowCount").innerText = `${windowOs} Apps`;

function showAppleProducts(e){
	setSearchDiv(e,"apple","appleDropDown","Apple");	
}

function showGoogleProducts(e){
	setSearchDiv(e,"android","googleDropDown","Google");
}

function showWindowProducts(e){
	setSearchDiv(e,"window","windowDropDown","Microsoft");
}

function _(ele){
	return document.querySelector(ele)
}

function setSearchDiv(e,ele,dropdown,place){	
	e.stopPropagation();
	_(".searchDiv")!=null ? _(".searchDiv").remove(): '';

	_(`.${ele}`).innerHTML += `<div class="searchDiv" onclick=wholeSearchDiv(event)>
		<input type="text" class="seachBrand" placeholder="Search" oninput=searchPlatform(event,'${ele}') />
		<ul class="ul"></ul
	</div>`;

	getValue(place);

	_(".seachBrand").focus();

}

function getValue(type){
	searchObj={};
	let count=0
	keys.forEach(function(eachObj){ 
		count+=1;
		if(data.data[eachObj].brand===type){
			if(Object.keys(data.data[eachObj].platforms).length === 0){
				_("ul").innerHTML+=`<li class=li${count}><b>? </b> | ${data.data[eachObj].identifier} <div class="deleteBtn"><i class="fa-solid fa-gear"></i><i class="fa-solid fa-trash" id=${data.data[eachObj].aaID} onclick=deleteBrand(event)></i></div></li>`
				Object.assign(searchObj, {[eachObj]:data.data[eachObj]});
			}
			else{
				let innerPlatformObj =  Object.keys(data.data[eachObj].platforms);

				innerPlatformObj.forEach(function(eachInnerObj){
					_("ul").innerHTML+=`<li class=li${count}><b>${data.data[eachObj].platforms[eachInnerObj].OS}</b> | ${data.data[eachObj].identifier} <div class="deleteBtn"><i class="fa-solid fa-gear"></i><i class="fa-solid fa-trash" id=${data.data[eachObj].platforms[eachInnerObj].APID} onclick=deleteBrand(event)></i></div></li>`
					Object.assign(searchObj, {[eachObj]:data.data[eachObj]});
				});	
			}
		}
	})
}


function searchPlatform(e,ele){
	e.stopPropagation();
	let count=0
	_("ul").innerHTML='';
	_(`.${ele} ul`).innerHTML +=`<li class="noRecords">No Records</li>`
	let typeVal = (e.target.value).toLowerCase();

	Object.keys(searchObj).forEach(function(eachObj){
		count+=1;
			if(Object.keys(searchObj[eachObj].platforms).length === 0){
				let identifier = (searchObj[eachObj].identifier);
				if(((identifier.toLowerCase()).includes(typeVal))){
					_(".noRecords")!=null ?_(".noRecords").remove():'';	
					_(`.${ele} ul`).innerHTML+=`<li class=li${count}><b>? </b> | ${identifier} <div class="deleteBtn"><i class="fa-solid fa-gear"></i><i class="fa-solid fa-trash" id="${searchObj[eachObj].aaID}" onclick=deleteBrand(event)></i></div></li>`;
				}
			}
			else{
				let innerPlatformObj =  Object.keys(searchObj[eachObj].platforms);
				innerPlatformObj.forEach(function(eachInnerObj){
					let platformOS = (searchObj[eachObj].platforms[eachInnerObj].OS);
					let identifier = (searchObj[eachObj].identifier);

					if((platformOS.toLowerCase()).includes(typeVal) || (identifier.toLowerCase()).includes(typeVal)){
						_(".noRecords")!=null ?_(".noRecords").remove():'';	
						_(`.${ele} ul`).innerHTML+=`<li class=li${count}><b>${platformOS} </b> | ${identifier} <div class="deleteBtn"><i class="fa-solid fa-gear"></i><i class="fa-solid fa-trash" id="${searchObj[eachObj].platforms[eachInnerObj].APID}"" onclick=deleteBrand(event)></i></div></li>`;
					}
				});	
			}
		
	})
}

_("body").addEventListener("click",function(e){
	if(!(e.target.classList.contains("downArrow"))){
		_(".rotateIcon")!=null ? _(".rotateIcon").classList.remove("rotateIcon"):'';
		_(".searchDiv")!=null ? _(".searchDiv").remove(): '';
	}
})

function wholeSearchDiv(e){
	e.stopPropagation()
}

function deleteBrand(e){
	let deleteElement = e.target.parentNode.parentNode.classList[0];

	_("body").innerHTML += `<div class="deletePopUP" onclick="event.stopPropagation()">
		<i class="fa-regular fa-circle-xmark" onclick=closePopUP()></i>
		<div class="innerPopUP">
			<i class="fa-regular fa-circle-xmark innerPopUPcloseBtn" onclick=closePopUP()></i>

			<h2>Do you want to delete this platform</h2>
			<div class="confirmDelete">
				<button onclick=closePopUP()>Cancel</button>
				<button class="deletConfirmBtn">Delete</button>
			</div>	
		</div>	
	</div>`

	_(".deletConfirmBtn").addEventListener("click",function(){
		_(`.${deleteElement}`).remove();

		let createSpan =  document.createElement("div");
		createSpan.innerText= "Deleted Successfully";
		createSpan.setAttribute("class","deletedSccessMsg")

		_("ul").prepend(createSpan);


		setTimeout(function () {
			_(".deletedSccessMsg").remove();
	    }, 1000);
		closePopUP();
	})	
}




function closePopUP(){
	_(".deletePopUP").remove();
}





// Nums = [1,2,2,3];

// let removedDuplicate = [...new Set(Nums)];


// let ansObj={}
// let total=0;
// let arr = [1,2,2,2,2,4,7,7,7,7, 8,3,4,5,6,7,9,1,2,5]
// let len = arr.length;

// for(i=0;i<len;i++){
// 	for(j=0;j<len;j++){
// 		if(arr[i]==arr[j]){
// 			total+=1;
// 		}
// 	}
// 	ansObj[arr[i]]=total;
// 	total=0
// }

// console.log(ansObj)



// let arr = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100];


// let ansarr=[];

// console.log(arr)
// for(i=(arr.length)-1;i>=0;i--){
// 	ansarr.push((arr[i]))
// }
// console.log(ansarr)


// function reverseInt(num){
// 	console.log(num/10)
// 	// let mod = num%10;
// 	// console.log(mod)
// 	num= JSON.stringify(num)
// 	let splitArr= num.split('');
// 	console.log(splitArr.reverse().join(''))
// }

// reverseInt(15012343)


// let arr=[3, 4, 5,10,4,5,3];
// let len = arr.length;
// let ansArr=[];
// for(i=0;i<len;i++){
// 	let ans=1;
// 	for(j=0;j<len;j++){
// 		if(i != j){
// 			ans*=arr[j];
// 		}
// 	}
// 	ansArr.push(ans)
// }

// console.log(ansArr)

// let n=4;
// let arr = [];
// for(i=0;i<n;i++){
// 	arr.push(new Array(n))
// }
// row=0;
// column=0;
// let count=1
// for(i=0;i<n;i++){
// 	arr[row][column]=count;
// 	if(column==n-1){
// 		for(j=row;j<n;j++){
// 			arr[row][column]=count;
// 			if(row==n-1){
// 				for(k=column;k>=0;k--){
// 					arr[row][column]=count;
// 					if(column==0){
// 						row-=1;
// 						for(l=row;row>=1;l--){
// 							arr[row][column]=count;
// 							row-=1;
// 							count+=1
// 						}		
// 					}
// 					column-=1;
// 					count+=1
// 				}
// 			}
// 			row+=1;
// 			count+=1
// 		}
// 	}
// 	column+=1;
// 	count+=1
// }